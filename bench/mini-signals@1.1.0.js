"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function _classCallCheck(n,i){if(!(n instanceof i))throw TypeError("Cannot call a class as a function")}var MiniSignalBinding=function(){function n(i,t,e){void 0===t&&(t=!1),_classCallCheck(this,n),this._fn=i,this._once=t,this._thisArg=e,this._next=this._prev=this._owner=null}return _createClass(n,[{key:"detach",value:function n(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}();function _addMiniSignalBinding(n,i){return n._head?(n._tail._next=i,i._prev=n._tail,n._tail=i):(n._head=i,n._tail=i),i._owner=n,i}var MiniSignal=function(){function n(){_classCallCheck(this,n),this._head=this._tail=void 0}return _createClass(n,[{key:"handlers",value:function n(){var i=!(arguments.length<=0)&&void 0!==arguments[0]&&arguments[0],t=this._head;if(i)return!!t;for(var e=[];t;)e.push(t),t=t._next;return e}},{key:"has",value:function n(i){if(!(i instanceof MiniSignalBinding))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return i._owner===this}},{key:"dispatch",value:function n(){var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,arguments),i=i._next;return!0}},{key:"add",value:function n(i){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof i)throw Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(i,!1,t))}},{key:"once",value:function n(i){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof i)throw Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(i,!0,t))}},{key:"detach",value:function n(i){if(!(i instanceof MiniSignalBinding))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return i._owner!==this||(i._prev&&(i._prev._next=i._next),i._next&&(i._next._prev=i._prev),i===this._head?(this._head=i._next,null===i._next&&(this._tail=null)):i===this._tail&&(this._tail=i._prev,this._tail._next=null),i._owner=null),this}},{key:"detachAll",value:function n(){var i=this._head;if(!i)return this;for(this._head=this._tail=null;i;)i._owner=null,i=i._next;return this}}]),n}();MiniSignal.MiniSignalBinding=MiniSignalBinding,exports.default=MiniSignal,module.exports=exports.default;