!function(t,n){if("function"==typeof define&&define.amd)define("MiniSignal",["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var i={exports:{}};n(i.exports,i),t.MiniSignal=i.exports}}(this,function(t,n){"use strict";var i=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}();function e(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}var a=function t(n){var i=!(arguments.length<=1)&&void 0!==arguments[1]&&arguments[1];e(this,t),this._fn=n,this._next=this._prev=null,this._once=i};function r(t,n){return t._head?(t._tail._next=n,n._prev=t._tail,t._tail=n):(t._head=n,t._tail=n),n.detach=(function(){t.detach(this)}).bind(n),n}var u=function(){function t(){e(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function t(){var n=!(arguments.length<=0)&&void 0!==arguments[0]&&arguments[0],i=this._head;if(n)return!!i;for(var e=[];i;)e.push(i),i=i._next;return e}},{key:"dispatch",value:function t(){var n=this._head;if(!n)return!1;for(;n;)n._fn.apply(this,arguments),n._once&&this.detach(n),n=n._next;return!0}},{key:"add",value:function t(n){if("function"!=typeof n)throw Error("MiniSignal#add(): First arg must be a Function.");return r(this,new a(n))}},{key:"once",value:function t(n){if("function"!=typeof n)throw Error("MiniSignal#once(): First arg must be a Function.");return r(this,new a(n,!0))}},{key:"detach",value:function t(n){if(!(n instanceof a))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._fn&&(n===this._head?(this._head=n._next,this._head?this._head._prev=null:this._tail=null):n===this._tail?(this._tail=n._prev,this._tail._next=null):(n._prev._next=n._next,n._next._prev=n._prev),n._fn=null),this}},{key:"detachAll",value:function t(){return this._head=this._tail=null,this}}]),t}();u.MiniSignalBinding=a,n.exports=u});